## Database Connection (env-first with sensible local defaults)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/urban_nav}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:urban}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:urban}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:1}
spring.datasource.hikari.minimum-idle=${DB_MIN_IDLE:0}
spring.datasource.hikari.idle-timeout=${DB_IDLE_TIMEOUT_MS:15000}
spring.datasource.hikari.max-lifetime=${DB_MAX_LIFETIME_MS:30000}
spring.datasource.hikari.connection-timeout=${DB_CONN_TIMEOUT_MS:30000}

## JPA/Hibernate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false

## Flyway (defaults to datasource if env not provided)
spring.flyway.url=${SPRING_FLYWAY_URL:${spring.datasource.url}}
spring.flyway.user=${SPRING_FLYWAY_USER:${spring.datasource.username}}
spring.flyway.password=${SPRING_FLYWAY_PASSWORD:${spring.datasource.password}}
spring.flyway.connect-retries=${FLYWAY_RETRIES:3}
spring.flyway.connect-retries-interval=${FLYWAY_RETRY_INTERVAL:2s}

# Debug logging
logging.level.org.springframework.security=DEBUG
logging.level.com.travel=DEBUG
logging.level.org.springframework.web=DEBUG

# Show exact error message in API responses
server.error.include-message=always

## JWT (env overrides)
app.jwt.secret=${APP_JWT_SECRET:ldSBYoljpC53dEWwHXhnViUqFHwNH7Fgn61mTnxfmo5OvKvb4z1IEpqTdDnrwQlxa2lvGQ3WnDQUChuu6gbaVg==}
app.jwt.expiration-ms=${APP_JWT_EXPIRATION_MS:86400000}

# Optional: Hibernate DDL Options
# spring.jpa.hibernate.ddl-auto=create-drop  # dev only
