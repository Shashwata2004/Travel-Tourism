<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.SVGPath?>

<StackPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1"
           fx:controller="com.travel.frontend.controller.BookingDialogController"
           stylesheets="@/css/hotel_booking_dialog.css">
    <children>
        <BorderPane prefWidth="760" prefHeight="640" styleClass="bookingCard">
            <top>
                <VBox spacing="16" styleClass="hero">
                    <padding>
                        <Insets top="18" right="18" bottom="18" left="18"/>
                    </padding>
                    <HBox alignment="CENTER_RIGHT">
                        <Label fx:id="heroTitle" styleClass="heroTitle" text="Complete Your Booking"/>
                        <Pane HBox.hgrow="ALWAYS"/>
                        <Button text="✕" onAction="#onCancel" styleClass="closeBtn"/>
                    </HBox>
                    <Label fx:id="heroSubtitle" styleClass="heroLabel" text="Fill in your details to confirm your reservation"/>
                </VBox>
            </top>

            <center>
                <VBox spacing="16">
                    <padding>
                        <Insets top="18" right="18" bottom="18" left="18"/>
                    </padding>
                    <GridPane hgap="18" vgap="14">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="50"/>
                            <ColumnConstraints percentWidth="50"/>
                        </columnConstraints>

                        <!-- Personal Info -->
                        <VBox spacing="8" GridPane.columnIndex="0">
                            <HBox alignment="CENTER_LEFT" spacing="6">
                                <SVGPath content="M4 6h16v2H4V6zm0 4h16v2H4v-2zm0 4h16v2H4v-2z" styleClass="sectionIcon"/>
                                <Label text="Personal Information" styleClass="sectionTitle"/>
                            </HBox>
                            <VBox spacing="8">
                                <Label text="Username" styleClass="fieldLabel"/>
                                <TextField fx:id="usernameField" styleClass="textField" editable="false"/>
                            </VBox>
                            <VBox spacing="8">
                                <Label text="Full Name" styleClass="fieldLabel"/>
                                <TextField fx:id="fullNameField" styleClass="textField" editable="false"/>
                            </VBox>
                            <VBox spacing="8">
                                <Label text="ID Number" styleClass="fieldLabel"/>
                                <TextField fx:id="idNumberField" styleClass="textField" editable="false"/>
                            </VBox>
                            <VBox spacing="8">
                                <Label text="Total Persons" styleClass="fieldLabel"/>
                                <HBox spacing="10" alignment="CENTER_LEFT">
                                    <VBox styleClass="personDisplay" alignment="CENTER">
                                        <Label fx:id="personCountLabel" styleClass="personCount"/>
                                        <Label text="Guests" styleClass="personSub"/>
                                    </VBox>
                                    <VBox spacing="8">
                                        <Button fx:id="upBtn" text="˄" onAction="#onIncrement" styleClass="arrowBtn upBtn"/>
                                        <Button fx:id="downBtn" text="˅" onAction="#onDecrement" styleClass="arrowBtn downBtn"/>
                                    </VBox>
                                    <!-- Hidden spinner to keep value factory/logic; display comes from custom pill -->
                                    <Spinner fx:id="personsSpinner" visible="false" managed="false"/>
                                </HBox>
                            </VBox>
                        </VBox>

                        <!-- Payment Info -->
                        <VBox spacing="8" GridPane.columnIndex="1">
                            <HBox alignment="CENTER_LEFT" spacing="6">
                                <SVGPath content="M12 2a5 5 0 0 0-5 5v1H5a1 1 0 0 0-1 1v10a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V9a1 1 0 0 0-1-1h-2V7a5 5 0 0 0-5-5zm0 2a3 3 0 0 1 3 3v1H9V7a3 3 0 0 1 3-3zm-1 10a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm4 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z" styleClass="sectionIcon"/>
                                <Label text="Payment Information" styleClass="sectionTitle"/>
                            </HBox>
                            <VBox spacing="8">
                                <HBox spacing="6" alignment="CENTER_LEFT">
                                    <SVGPath content="M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v3H3V5zm0 5h18v5a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5zm3 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm3 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z" styleClass="fieldIcon"/>
                                    <Label text="Card Number" styleClass="fieldLabel"/>
                                </HBox>
                                <TextField fx:id="cardField" promptText="1234 5678 9012 3456" styleClass="textField"/>
                            </VBox>
                            <VBox spacing="8">
                                <HBox spacing="6" alignment="CENTER_LEFT">
                                    <SVGPath content="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5zm0 2c-3.33 0-10 1.67-10 5v1h20v-1c0-3.33-6.67-5-10-5z" styleClass="fieldIcon"/>
                                    <Label text="Cardholder Name" styleClass="fieldLabel"/>
                                </HBox>
                                <TextField fx:id="nameField" promptText="JOHN DOE" styleClass="textField"/>
                            </VBox>
                            <HBox spacing="12">
                                <VBox spacing="8" HBox.hgrow="ALWAYS">
                                    <HBox spacing="6" alignment="CENTER_LEFT">
                                        <SVGPath content="M6 2h2v2h8V2h2v2h2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2V2zm14 6H4v10h16V8zm-8 2h2v2h-2v-2z" styleClass="fieldIcon"/>
                                        <Label text="Expiry Date" styleClass="fieldLabel"/>
                                    </HBox>
                                    <TextField fx:id="expiryField" promptText="MM/YY" styleClass="textField"/>
                                </VBox>
                                <VBox spacing="8" HBox.hgrow="ALWAYS">
                                    <HBox spacing="6" alignment="CENTER_LEFT">
                                        <SVGPath content="M4 6h16a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm0 2v6h16V8H4zm2 2h4v2H6v-2z" styleClass="fieldIcon"/>
                                        <Label text="CVV" styleClass="fieldLabel"/>
                                    </HBox>
                                    <TextField fx:id="cvvField" promptText="123" styleClass="textField"/>
                                </VBox>
                            </HBox>
                            <HBox alignment="CENTER" spacing="6">
                                <SVGPath content="M5 13l4 4L19 7" styleClass="secureIcon"/>
                                <Label text="256-bit SSL Encrypted Payment" styleClass="secureNote"/>
                            </HBox>
                        </VBox>
                    </GridPane>

                    <VBox spacing="10">
                        <HBox spacing="14" alignment="CENTER_LEFT">
                            <VBox spacing="6" styleClass="priceCard">
                                <HBox spacing="6" alignment="CENTER_LEFT">
                                    <SVGPath content="M5 11h14v2H5v-2zm0-4h14v2H5V7zm0 8h14v2H5v-2z" styleClass="priceIcon"/>
                                    <Label text="Total Price" styleClass="priceLabel"/>
                                </HBox>
                                <Label fx:id="priceLabel" styleClass="priceValue"/>
                            </VBox>
                        </HBox>
                        <Separator/>
                        <HBox spacing="12" alignment="CENTER_RIGHT">
                            <Pane HBox.hgrow="ALWAYS"/>
                            <Button fx:id="payButton" text="Confirm Booking" onAction="#onConfirm" styleClass="pillBtn primary"/>
                        </HBox>
                    </VBox>
                    <Label fx:id="statusLabel" styleClass="statusLabel"/>
                </VBox>
            </center>
        </BorderPane>
    </children>
</StackPane>
