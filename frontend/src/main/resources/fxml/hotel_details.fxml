<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.SVGPath?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.shape.Rectangle?>

<StackPane xmlns="http://javafx.com/javafx"
           xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.travel.frontend.controller.HotelDetailsController"
           stylesheets="@/css/hotel_details.css"
           fx:id="rootStack">
    <children>
        <ScrollPane fx:id="rootScroll"
                    styleClass="rootScroll"
                    fitToWidth="true"
                    hbarPolicy="NEVER"
                    vbarPolicy="AS_NEEDED">
            <content>
                <StackPane>
                    <Pane styleClass="orbLayer">
                        <children>
                            <Circle fx:id="orbA" centerX="200" centerY="200" radius="200" styleClass="orbA"/>
                            <Circle fx:id="orbB" centerX="900" centerY="180" radius="220" styleClass="orbB"/>
                            <Circle fx:id="orbC" centerX="500" centerY="520" radius="260" styleClass="orbC"/>
                            <Circle fx:id="orbD" centerX="300" centerY="480" radius="180" styleClass="orbD"/>
                            <Circle fx:id="orbE" centerX="820" centerY="420" radius="160" styleClass="orbE"/>
                            <Rectangle fx:id="ray1" x="240" y="-200" width="6" height="1400" styleClass="ray rayOne"/>
                            <Rectangle fx:id="ray2" x="640" y="-200" width="6" height="1400" styleClass="ray rayTwo"/>
                            <Rectangle fx:id="ray3" x="1040" y="-200" width="6" height="1400" styleClass="ray rayThree"/>
                            <Rectangle fx:id="shimmerRect" x="-400" y="0" width="2200" height="1400" styleClass="shimmerSweep"/>
                        </children>
                    </Pane>

                        <VBox spacing="20" styleClass="detailsRoot" alignment="TOP_CENTER">

                        <VBox spacing="12" styleClass="galleryCard">
                            <StackPane>
                                <ImageView fx:id="mainImage" preserveRatio="true" fitWidth="1040" fitHeight="620"/>
                                <Label fx:id="imageCounter" styleClass="imageCounter" StackPane.alignment="BOTTOM_RIGHT">
                                    <StackPane.margin>
                                        <Insets top="10" right="10" bottom="10" left="10"/>
                                    </StackPane.margin>
                                </Label>
                            </StackPane>
                            <HBox fx:id="thumbnails" spacing="10" styleClass="thumbRow"/>
                        </VBox>

                        <VBox spacing="10" styleClass="infoCard headerCard" prefWidth="1040" maxWidth="1040" minWidth="1040">
                            <HBox alignment="CENTER_LEFT" spacing="12">
                                <Label fx:id="nameLabel" styleClass="hotelName"/>
                                <Label fx:id="ratingLabel" styleClass="ratingBadge"/>
                                <Pane HBox.hgrow="ALWAYS"/>
                            </HBox>
                            <HBox alignment="CENTER_LEFT" spacing="8">
                                <SVGPath content="M12 2c-3.3137 0-6 2.6863-6 6 0 4.5 6 10 6 10s6-5.5 6-10c0-3.3137-2.6863-6-6-6zm0 8.2c-1.215 0-2.2-.985-2.2-2.2 0-1.215.985-2.2 2.2-2.2 1.215 0 2.2.985 2.2 2.2 0 1.215-.985 2.2-2.2 2.2z" styleClass="locationIcon"/>
                                <Label fx:id="locationLabel" wrapText="true" styleClass="locationText"/>
                            </HBox>
                            <Separator/>
                        </VBox>

                        <VBox spacing="12" styleClass="infoCard" prefWidth="1140" maxWidth="1140" minWidth="1140">
                            <HBox alignment="CENTER_LEFT" spacing="8">
                                <SVGPath content="M3 3l6 3-6 3 6 3-6 3 9 4 9-4-6-3 6-3-6-3 6-3-9-4z" styleClass="nearbyIcon"/>
                                <Label text="What's Nearby" styleClass="sectionTitle"/>
                            </HBox>
                            <GridPane fx:id="nearbyGrid" hgap="12" vgap="12" styleClass="nearbyGrid"/>
                        </VBox>

                        <VBox spacing="12" styleClass="infoCard" prefWidth="1140" maxWidth="1140" minWidth="1140">
                            <Label text="Facilities" styleClass="sectionTitle"/>
                            <TilePane fx:id="facilitiesGrid" prefColumns="3" hgap="12" vgap="12" prefTileWidth="300" prefTileHeight="140"/>
                        </VBox>

                        <VBox spacing="10" styleClass="infoCard" prefWidth="1140" maxWidth="1140" minWidth="1140">
                            <Label text="Hotel Description" styleClass="sectionTitle"/>
                            <HBox spacing="24">
                                <Label fx:id="roomsMetaLabel" styleClass="metaInfo"/>
                                <Label fx:id="floorsMetaLabel" styleClass="metaInfo"/>
                            </HBox>
                            <Label fx:id="descriptionText" wrapText="true" styleClass="descriptionText"/>
                        </VBox>

                        <VBox spacing="12" styleClass="infoCard" prefWidth="1140" maxWidth="1140" minWidth="1140">
                            <HBox alignment="CENTER_LEFT">
                                <Label text="Rooms" styleClass="sectionTitle"/>
                            </HBox>
                            <VBox fx:id="roomsContainer" spacing="14"/>
                        </VBox>
                    </VBox>
                </StackPane>
            </content>
        </ScrollPane>

        <!-- Fixed action buttons -->
        <VBox alignment="TOP_LEFT"
              spacing="12"
              StackPane.alignment="TOP_LEFT"
              pickOnBounds="false">
            <StackPane.margin>
                <Insets top="18" right="0" bottom="0" left="18"/>
            </StackPane.margin>
            <Button onAction="#goBack"
                    styleClass="pageReloadBtn"
                    maxWidth="160">
                <graphic>
                    <HBox alignment="CENTER" spacing="6">
                        <SVGPath styleClass="reloadIcon"
                                 content="M10 6l-3 3 3 3M6 9h10a3 3 0 0 1 0 6h-2"/>
                        <Label text="Back" styleClass="reloadLabel"/>
                    </HBox>
                </graphic>
            </Button>
        </VBox>

        <VBox alignment="TOP_RIGHT"
              spacing="12"
              StackPane.alignment="TOP_RIGHT"
              pickOnBounds="false">
            <StackPane.margin>
                <Insets top="18" right="18" bottom="0" left="0"/>
            </StackPane.margin>
            <Button onAction="#reload"
                    styleClass="pageReloadBtn"
                    maxWidth="160">
                <graphic>
                    <HBox alignment="CENTER" spacing="6">
                        <SVGPath styleClass="reloadIcon"
                                 content="M12 5v4l3-3m-6 0 3 3V5a7 7 0 1 1-7 7h2a5 5 0 1 0 5-5z"/>
                        <Label text="Reload" styleClass="reloadLabel"/>
                    </HBox>
                </graphic>
            </Button>
        </VBox>

        <!-- Sticky Pricing Summary overlay, outside scroll -->
        <VBox fx:id="summaryBox"
              alignment="TOP_CENTER"
              prefHeight="520"
              spacing="10"
              StackPane.alignment="TOP_RIGHT"
              visible="false"
              styleClass="summaryCard">
            <StackPane.margin>
                <Insets top="96" right="16" bottom="0" left="16"/>
            </StackPane.margin>

            <Label text="Pricing Summary" styleClass="summaryHeader"/>
            <VBox spacing="8">
                <Label text="Added Rooms" styleClass="summarySubhead"/>
                <ScrollPane fx:id="summaryScroll" fitToWidth="true" hbarPolicy="NEVER" vbarPolicy="AS_NEEDED" styleClass="summaryScroll">
                    <content>
                        <VBox fx:id="summaryList" spacing="6"/>
                    </content>
                </ScrollPane>
            </VBox>
            <Separator/>
            <VBox spacing="8" alignment="CENTER">
                <Label text="Total Amount" styleClass="summaryLabel"/>
                <Label fx:id="summaryTotal" text="BDT 0" styleClass="summaryTotal"/>
                <HBox alignment="CENTER" spacing="6">
                    <SVGPath content="M5 12l3 3 7-7" styleClass="summaryCheck"/>
                    <Label text="All taxes and fees included" styleClass="summaryNote"/>
                </HBox>
            </VBox>
            <Button text="Continue" onAction="#onContinueBooking" styleClass="summaryContinueBtn"/>
        </VBox>
    </children>
</StackPane>
